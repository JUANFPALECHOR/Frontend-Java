<div class="create-category-container">
  <h2>Crear Nueva Categoría</h2>
  <form [formGroup]="categoryForm" (ngSubmit)="onSubmit()">
    <div>
      <label for="name">Nombre de la Categoría:</label>
      <app-input
        id="name"
        formControlName="name"
        [required]="true"
        [minlength]="1"
        [maxlength]="50">
      </app-input>

      <!-- Mostrar error si el campo es inválido -->
      <div *ngIf="categoryForm?.get('name')?.invalid && categoryForm?.get('name')?.touched">
        <small *ngIf="categoryForm?.get('name')?.errors?.['required']">Este campo es requerido</small>
        <small *ngIf="categoryForm?.get('name')?.errors?.['minlength']">Debe tener al menos 1 carácter</small>
        <small *ngIf="categoryForm?.get('name')?.errors?.['maxlength']">No puede exceder 50 caracteres</small>
      </div>
    </div>

    <div>
      <label for="description">Descripción:</label>
      <app-textarea
        id="description"
        formControlName="description"
        [required]="true"
        [maxlength]="90">
      </app-textarea>

      <!-- Mostrar error si el campo es inválido -->
      <div *ngIf="categoryForm?.get('description')?.invalid && categoryForm?.get('description')?.touched">
        <small *ngIf="categoryForm?.get('description')?.errors?.['required']">Este campo es requerido</small>
        <small *ngIf="categoryForm?.get('description')?.errors?.['maxlength']">No puede exceder 90 caracteres</small>
      </div>
    </div>

    <!-- Usamos app-button en lugar del button nativo -->
    <app-button
      label="Crear Categoría"
      type="submit"
      [disabled]="categoryForm.invalid">
    </app-button>
  </form>

  <hr>

  <h2>Categorías</h2>

  <!-- Controles para la ordenación -->
  <div class="sort-controls">
    <app-button label="Orden Ascendente" (click)="getCategories(1, 10, 'asc')" (keydown.enter)="getCategories(1, 10, 'asc')"></app-button>
    <app-button label="Orden Descendente" (click)="getCategories(1, 10, 'desc')" (keydown.enter)="getCategories(1, 10, 'desc')"></app-button>
  </div>

  <hr>

  <!-- Tabla para mostrar las categorías -->
  <div class="category-list">
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Nombre</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let category of categories">
          <td>{{ category.id }}</td>
          <td>{{ category.name }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Controles de paginación -->
  <div class="pagination-controls">
    <app-button 
  label="Anterior" 
  (click)="getCategories(currentPage - 1, 10, currentOrder)" 
  [disabled]="currentPage === 1"
  (keydown)="handleKeyPress($event)">
</app-button>

<app-button 
  label="Siguiente" 
  (click)="getCategories(currentPage + 1, 10, currentOrder)" 
  [disabled]="!hasMoreCategories"
  (keydown)="handleKeyPress($event)">
</app-button>

  </div>
</div>
